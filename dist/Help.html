<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-color: #4285f4;
        --primary-dark: #3367d6;
        --success-color: #0f9d58;
        --warning-color: #f4b400;
        --error-color: #db4437;
        --text-dark: #202124;
        --text-light: #5f6368;
        --bg-light: #f8f9fa;
        --border-color: #dadce0;
        --shadow: 0 1px 3px rgba(60,64,67,0.15);
        --shadow-hover: 0 4px 8px rgba(60,64,67,0.2);
        --transition: all 0.2s ease;
      }
      
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      body {
        font-family: 'Roboto', Arial, sans-serif;
        color: var(--text-dark);
        margin: 0;
        padding: 20px;
        line-height: 1.5;
        font-size: 14px;
      }
      
      .section {
        margin-bottom: 24px;
      }
      
      h3 {
        margin-top: 0;
        color: var(--primary-color);
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 16px;
      }
      
      h4 {
        margin-top: 16px;
        margin-bottom: 8px;
        color: var(--text-dark);
        font-size: 15px;
        font-weight: 500;
      }
      
      p {
        margin: 8px 0;
        color: var(--text-dark);
      }
      
      .version {
        font-size: 12px;
        color: var(--text-light);
        margin-bottom: 8px;
      }
      
      .footer {
        margin-top: 24px;
        border-top: 1px solid var(--border-color);
        padding-top: 12px;
        font-size: 12px;
        color: var(--text-light);
        text-align: center;
      }
      
      ul, ol {
        padding-left: 24px;
        margin: 12px 0;
      }
      
      li {
        margin-bottom: 6px;
      }
      
      .tab-container {
        margin-bottom: 24px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        overflow: hidden;
      }
      
      .tab-buttons {
        display: flex;
        background-color: var(--bg-light);
        border-bottom: 1px solid var(--border-color);
      }
      
      .tab-button {
        padding: 12px 16px;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: var(--transition);
        color: var(--text-light);
        position: relative;
        outline: none;
      }
      
      .tab-button:hover {
        background-color: rgba(66,133,244,0.05);
        color: var(--primary-color);
      }
      
      .tab-button.active {
        color: var(--primary-color);
        background-color: #fff;
      }
      
      .tab-button.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--primary-color);
      }
      
      .tab-content {
        display: none;
        padding: 16px;
      }
      
      .tab-content.active {
        display: block;
      }
      
      .version-history {
        max-height: 180px;
        overflow-y: auto;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        padding: 12px;
        background: var(--bg-light);
        margin-top: 12px;
      }
      
      .version-item {
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--border-color);
      }
      
      .version-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }
      
      .version-date {
        font-size: 12px;
        color: var(--text-light);
        margin-left: 8px;
      }
      
      a {
        color: var(--primary-color);
        text-decoration: none;
      }
      
      a:hover {
        text-decoration: underline;
      }
      
      .feature-card {
        background-color: white;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }
      
      .feature-card:hover {
        box-shadow: var(--shadow-hover);
      }
      
      .feature-card h4 {
        margin-top: 0;
        color: var(--primary-color);
      }
      
      .feature-card.early-version {
        background-color: #f0f7ff;
        border-color: var(--primary-color);
      }
    </style>
  </head>
  <body>
    <div class="section">
      <h3>PipedriveSheets</h3>
      <div class="version">Version <?= currentVersion ?></div>
    </div>
    
    <div class="tab-container">
      <div class="tab-buttons">
        <button class="tab-button active" onclick="openTab(event, 'help')">Help</button>
        <button class="tab-button" onclick="openTab(event, 'about')">About</button>
        <button class="tab-button" onclick="openTab(event, 'version')">Version History</button>
      </div>
      
      <div id="help" class="tab-content active">
        <div class="feature-card early-version">
          <h4>Heads Up: This Is an Early Version</h4>
          <p>PipedriveSheets is just getting started, and your feedback means a lot!</p>
          <p>If you run into any issues or have ideas for improvement, feel free to email me at <a href="mailto:support@pipedrivesheets.com">support@pipedrivesheets.com</a>. I’m doing my best to respond quickly and make sure everything runs smoothly—your input really helps make the add-on better for everyone.</p>
          <p>Thanks for being part of the journey!</p>
        </div>
        
        <div class="section">
          <h4>Getting Started</h4>
          <ol>
            <li>Configure your filter settings in the <b>Pipedrive Settings</b> menu</li>
            <li>Select which columns to display using the <b>Column Selection</b> menu</li>
            <li>Click <b>Sync Data</b> to fetch data from Pipedrive</li>
          </ol>
        </div>
        
        <? if (userPlan === 'team' || userPlan === 'team_inherited') { ?>
        <div class="feature-card">
          <h4>Team Features</h4>
          <p>Use the <b>Team Management</b> option to create or join a team. Team members can share:</p>
          <ul>
            <li>Column preferences</li>
            <li>Filter configurations</li>
            <li>Access to synchronized data</li>
          </ul>
        </div>
        <? } ?>
        
        <? if (userPlan === 'pro_monthly' || userPlan === 'pro_annual' || userPlan === 'team' || userPlan === 'team_inherited') { ?>
        <div class="feature-card">
          <h4>Two-Way Sync</h4>
          <p>Enable <b>Two-Way Sync</b> to push your changes back to Pipedrive:</p>
          <ol>
            <li>Configure two-way sync settings</li>
            <li>Edit data in the sheet</li>
            <li>Click <b>Push Changes to Pipedrive</b> to update your Pipedrive data</li>
          </ol>
        </div>
        <? } ?>
      </div>
      
      <div id="about" class="tab-content">
        <div class="section">
          <h4>About This Add-on</h4>
          <p>PipedriveSheets seamlessly connects your Google Sheets™ with Pipedrive CRM.</p>
          <p>Key features:</p>
          <ul>
            <li>Fetch data from any saved Pipedrive filter</li>
            <li>Customize which fields to display</li>
            <li>Collaborate with team members</li>
            <li>Schedule automatic synchronization</li>
            <li>Push updates back to Pipedrive</li>
          </ul>
        </div>
        
        <div class="section">
          <h4>Support</h4>
          <p>For support or suggestions, please contact:</p>
          <p><a href="mailto:support@pipedrivesheets.com">support@pipedrivesheets.com</a></p>
        </div>
      </div>
      
      <div id="version" class="tab-content">
        <div class="section">
          <h4>Version History</h4>
          <div class="version-history">
            <? if (versionHistory && versionHistory.length > 0) { ?>
              <? versionHistory.forEach(function(version) { ?>
                <div class="version-item">
                  <div><b><?= version.version ?></b> <span class="version-date"><?= version.date ?></span></div>
                  <ul>
                    <? version.changes.forEach(function(change) { ?>
                      <li><?= change ?></li>
                    <? }); ?>
                  </ul>
                </div>
              <? }); ?>
            <? } else { ?>
              <div class="version-item">
                <div><b>1.0.0</b> <span class="version-date">Initial Release</span></div>
                <ul>
                  <li>First public release</li>
                </ul>
              </div>
            <? } ?>
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
      &copy; <?= new Date().getFullYear() ?> PipedriveSheets. All rights reserved.
    </div>
    
    <script>
      function openTab(evt, tabName) {
        // Hide all tab content
        var tabContents = document.getElementsByClassName('tab-content');
        for (var i = 0; i < tabContents.length; i++) {
          tabContents[i].classList.remove('active');
        }
        
        // Remove active class from all tab buttons
        var tabButtons = document.getElementsByClassName('tab-button');
        for (var i = 0; i < tabButtons.length; i++) {
          tabButtons[i].classList.remove('active');
        }
        
        // Show the specific tab content
        document.getElementById(tabName).classList.add('active');
        
        // Add active class to the button that opened the tab
        evt.currentTarget.classList.add('active');
      }
    </script>
  </body>
</html> 